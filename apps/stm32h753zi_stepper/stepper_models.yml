- name: 17HS3001-20B # NEMA17
  # references:
  #   - motor datasheet: Manufacturer PN 17HS3001-20B (torque/current/rating)
  #   - driver scaling: ST L6470 datasheet (MAX_SPEED 0.238 s/LSB; ACC/DEC 14.55 s^2/LSB; STALL_TH ~31mA/LSB)
  # verification: values below cross-checked to motor datasheet and L6470 scaling on 2025-09-04
  steps_per_rev: 200
  max_speed: 1200      # steps/sec (verified safe with 1/16 microstepping; clamped by CONFIG_L6470_MAX_SPEED_STEPS_PER_SEC)
  max_current: 1200    # mA
  max_microstep: 16
  rated_voltage: 2.0   # V
  holding_torque: 0.4  # Nm
  # L6470 init (derived from datasheet + conservative margins)
  use_microstep: 16
  kval_run: 24         # run PWM duty; start point validated on bench, adjust per load
  kval_acc: 24
  kval_dec: 24
  kval_hold: 12
  ocd_thresh_ma: 1500  # OCD threshold (mA), 375mA steps
  stall_thresh_ma: 800 # STALL_TH target ~0.8A -> enc 26
  acc_sps2: 1500       # steps/s^2 -> enc 0x67
  dec_sps2: 1500

- name: NEMA23-HighTorque # Generic NEMA23
  # references:
  #   - representative motor datasheet (NEMA23 high torque class)
  #   - driver scaling: ST L6470 datasheet
  # verification: conservative values chosen; fine-tune KVAL/stall on bench
  steps_per_rev: 200
  max_speed: 2000      # steps/sec conservative cap; tune per mechanics
  max_current: 3000
  max_microstep: 128
  rated_voltage: 3.0
  holding_torque: 1.2
  use_microstep: 16
  kval_run: 32         # higher run PWM for NEMA23; verify thermals
  kval_acc: 32
  kval_dec: 32
  kval_hold: 16
  ocd_thresh_ma: 2000
  stall_thresh_ma: 1200 # initial stall detect threshold (mA), adjust to avoid false trips
  acc_sps2: 2500
  dec_sps2: 2500
